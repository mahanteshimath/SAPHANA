WITH 

/* 

[NAME]

- HANA_Tests_MemoryOperations

[DESCRIPTION]

- Runtime test for memory operations

[SOURCE]

- SAP Note 1969700

[DETAILS AND RESTRICTIONS]

- Can be executed to measure memory performance and identify bottlenecks in memory management
- When statement is executed (once or several times), results can be retrieved from the SQL cache via
  SQL: "HANA_Tests_Results" available in SAP Note 1969700

[VALID FOR]

- Revisions:              all

[SQL COMMAND VERSION]

- 2021/04/16:  1.0 (initial version)

[INVOLVED TABLES]


[INPUT PARAMETERS]

- SQL_CACHE_TAG

  Tag for identifying SQL cache entry related to statement execution

  'ZMF_TEST_MEMORY' -> Use SQL cache tag ZMF_TEST_MEMORY

[OUTPUT PARAMETERS]


[EXAMPLE OUTPUT]


*/

BASIS_INFO AS
( SELECT
    'ZMF_TEST_MEMORY_OPERATION' SQL_CACHE_TAG
  FROM
    DUMMY
),
STRINGS AS
( SELECT CHAR(65) C FROM DUMMY UNION ALL
  SELECT CHAR(66) C FROM DUMMY UNION ALL
  SELECT CHAR(67) C FROM DUMMY UNION ALL
  SELECT CHAR(68) C FROM DUMMY UNION ALL
  SELECT CHAR(69) C FROM DUMMY UNION ALL
  SELECT CHAR(70) C FROM DUMMY UNION ALL
  SELECT CHAR(71) C FROM DUMMY UNION ALL
  SELECT CHAR(72) C FROM DUMMY UNION ALL
  SELECT CHAR(73) C FROM DUMMY UNION ALL
  SELECT CHAR(74) C FROM DUMMY UNION ALL
  SELECT CHAR(75) C FROM DUMMY UNION ALL
  SELECT CHAR(76) C FROM DUMMY UNION ALL
  SELECT CHAR(77) C FROM DUMMY UNION ALL
  SELECT CHAR(78) C FROM DUMMY UNION ALL
  SELECT CHAR(79) C FROM DUMMY UNION ALL
  SELECT CHAR(80) C FROM DUMMY UNION ALL
  SELECT CHAR(81) C FROM DUMMY UNION ALL
  SELECT CHAR(82) C FROM DUMMY UNION ALL
  SELECT CHAR(83) C FROM DUMMY
)
SELECT
  MAX(S1.C || S2.C || S3.C || S4.C || S5.C )
FROM
  STRINGS S1,
  STRINGS S2,
  STRINGS S3,
  STRINGS S4,
  STRINGS S5